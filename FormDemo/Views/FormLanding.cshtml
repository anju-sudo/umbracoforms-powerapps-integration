@using Models
@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<FormLanding>
@using ContentModels = Models;
@{
    Layout = "master.cshtml";

    // Get all FormPage children under this FormLanding
    var formPages = Model?.Children()
        ?.Where(x => x.ContentType.Alias == "formPages")
        ?? Enumerable.Empty<IPublishedContent>();

    // Split into chunks of 7 for multiple columns
    var formPagesList = formPages?.ToList() ?? new List<IPublishedContent>();
    var home = Umbraco.ContentAtRoot()?.FirstOrDefault()?.Url();

    var formLandingPages = Umbraco.ContentAtRoot().DescendantsOrSelfOfType("formLanding").ToList();

}

<section class="inner-banner">
    <div class="inner-banner__img">
        <img src="~/images/banner-bg.jpg" alt="banner background">
    </div>
    <div class="container">
        <div class="inner-banner__wrapper">
            <h1 class="font-48">List of All Government Services</h1>
        </div>
    </div>
</section>
<section class="sidebar-layout">
    <div class="container">
        <div class="layout-heading has-border">
            <div class="layout-heading-content limited-width">
                <h2 class="title-2">@Model?.Title</h2>
                <p>
                    Dolores placeat aut. Qui exercitationem quisquam deleniti aperiam iste
                    quisquam voluptatem quisquam aliquid. Doloremque id provident.
                </p>
            </div>
        </div>
        <div class="sidebar-layout__wrapper">
            <div class="sidebar-layout__content">
                <div class="link-list">
                    <ul>
                        @foreach (var formPage in formPagesList)
                        {
                            var formTitle = formPage?.Value<string>("formTitle") ?? formPage?.Name ?? "Untitled";

                            <li>
                                <a href="@formPage?.Url()">
                                    @formTitle
                                    <span class="icon">

                                        <svg xmlns="http://www.w3.org/2000/svg" width="8" height="14" viewBox="0 0 8 14" fill="none">

                                            <path d="M1 13L7 7L1 1" stroke="#07203B" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" />

                                        </svg>

                                    </span>

                                </a>
                            </li>
                        }

                    </ul>
                </div>
            </div>
            <div class="sidebar-layout__sidebar">
                <div class="sidebar-widget">
                    <ul>
                        @foreach (var page in formLandingPages)
                        {
                            var itemTitle = page?.Value<string>("title");
                            var pageUrl = page?.Url();
                            <li>
                                <a href="@pageUrl">
                                    @itemTitle<span class="icon">

                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">

                                            <g clip-path="url(#clip0_197_427)" stroke="#234A75" stroke-opacity=".6" stroke-width="1.667"
                                               stroke-linecap="round" stroke-linejoin="round">

                                                <path d="M10 18.333a8.333 8.333 0 100-16.666 8.333 8.333 0 000 16.666z" />

                                                <path d="M10 13.333L13.333 10 10 6.667M6.667 10h6.666" />

                                            </g>

                                            <defs>

                                                <clipPath id="clip0_197_427">

                                                    <path fill="#fff" d="M0 0h20v20H0z" />

                                                </clipPath>

                                            </defs>

                                        </svg>
                                    </span>
                                </a>
                            </li>
                        }
                            
                            
                        </ul>
                    </div>
                </div>
            </div>
        </div>
      
    </section>

@await Html.PartialAsync("common/footer", Model)
